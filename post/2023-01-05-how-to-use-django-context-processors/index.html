<!doctype html><html class="not-ready text-sm lg:text-base" style=--bg:#faf6f1 lang=fa dir=rtl><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>context processor ها در جنگو - تک ویت امید</title><meta name=theme-color><meta name=description content="گاهی اوقات لازم داریم که یه متغییر توی همه‌ی تمپلیت‌هامون در دسترس باشه.
برای اینکار دو روش وجود داره:
۱. روش سخت:‌ متغییری که لازم داریم رو توی همه‌ی view ها بزاریم
۲. روش آسون: یه custom context processor بسازیم
منطقیه که از روش دوم که هم آسون تره و در نهایت کد تمیز تری داریم استفاده کنیم.
چطور میشه از روش آسون اینکار رو بکینم؟ فرض کنیم که توی موقعیتی هستیم که لازمه یه عکس بنر رو توی تک تک صفحات وبسایت نمایش بدیم که این عکس بنر از دیتابیس گرفته میشه."><meta name=author content="امید"><link rel="preload stylesheet" as=style href=https://omidmamadi.github.io/main.min.css><script defer src=https://omidmamadi.github.io/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=preload as=image href=https://omidmamadi.github.io/theme.png><link rel=preload as=image href="https://www.gravatar.com/avatar/c91481ab331f5bbd77616e951c2e3cd8?s=160&d=identicon"><link rel=preload as=image href=https://omidmamadi.github.io/github.svg><link rel=preload as=image href=https://omidmamadi.github.io/instagram.svg><link rel=icon href=https://omidmamadi.github.io/favicon.ico><link rel=apple-touch-icon href=https://omidmamadi.github.io/apple-touch-icon.png><meta name=generator content="Hugo 0.108.0"><meta property="og:title" content="context processor ها در جنگو"><meta property="og:description" content="گاهی اوقات لازم داریم که یه متغییر توی همه‌ی تمپلیت‌هامون در دسترس باشه.
برای اینکار دو روش وجود داره:
۱. روش سخت:‌ متغییری که لازم داریم رو توی همه‌ی view ها بزاریم
۲. روش آسون: یه custom context processor بسازیم"><meta property="og:type" content="article"><meta property="og:url" content="https://omidmamadi.github.io/post/2023-01-05-how-to-use-django-context-processors/"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-01-05T20:26:35+03:30"><meta property="article:modified_time" content="2023-01-05T20:26:35+03:30"><meta itemprop=name content="context processor ها در جنگو"><meta itemprop=description content="گاهی اوقات لازم داریم که یه متغییر توی همه‌ی تمپلیت‌هامون در دسترس باشه.
برای اینکار دو روش وجود داره:
۱. روش سخت:‌ متغییری که لازم داریم رو توی همه‌ی view ها بزاریم
۲. روش آسون: یه custom context processor بسازیم"><meta itemprop=datePublished content="2023-01-05T20:26:35+03:30"><meta itemprop=dateModified content="2023-01-05T20:26:35+03:30"><meta itemprop=wordCount content="268"><meta itemprop=keywords content="بک اند,جنگو,"><meta name=twitter:card content="summary"><meta name=twitter:title content="context processor ها در جنگو"><meta name=twitter:description content="گاهی اوقات لازم داریم که یه متغییر توی همه‌ی تمپلیت‌هامون در دسترس باشه.
برای اینکار دو روش وجود داره:
۱. روش سخت:‌ متغییری که لازم داریم رو توی همه‌ی view ها بزاریم
۲. روش آسون: یه custom context processor بسازیم"></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-[5rem] max-w-3xl px-8 lg:justify-center" dir=ltr><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"><nav class="mt-12 flex justify-center space-x-10 dark:invert lg:mt-0 lg:ml-12 lg:items-center lg:space-x-6"><a class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./github.svg) href=https://github.com/techwithomid target=_blank></a>
<a class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./instagram.svg) href=https://instagram.com/techwithomid target=_blank></a></nav><nav class="ml-6 lg:flex lg:flex-row lg:items-center lg:space-x-6"><a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/contact/>تماس با من</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/about/>درباره‌من</a></nav></div><a class="btn-menu relative z-50 -mr-8 flex h-[5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"></a><div class="relative z-50 ml-auto flex items-center"><a class="btn-dark ml-6 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]"></a>
<a class="-translate-x-[1px] -translate-y-0.5 text-3xl font-bold ml-6" href=https://omidmamadi.github.io/>تک ویت امید</a></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg=`"#faf6f1"`.replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100%-10rem)] max-w-3xl px-8 pt-20 pb-32 dark:prose-invert"><article><header class=mb-20><h1 class="!my-0 pb-2.5">context processor ها در جنگو</h1><div class="text-sm opacity-60"><time>5 ژانویهٔ 2023</time>
<span class=mx-1>&#183;</span>
<span>امید</span>
<span class=mx-1>&#183;</span>
<time class="text-sm opacity-60">زمان مطالعه 2 دقیقه</time></div></header><section><p>گاهی اوقات لازم داریم که یه متغییر توی همه‌ی تمپلیت‌هامون در دسترس باشه.</p><p>برای اینکار دو روش وجود داره:</p><p>۱. روش سخت:‌ متغییری که لازم داریم رو توی همه‌ی view ها بزاریم</p><p>۲. روش آسون: یه custom context processor بسازیم</p><p>منطقیه که از روش دوم که هم آسون تره و در نهایت کد تمیز تری داریم استفاده کنیم.</p><h2 id=چطور-میشه-از-روش-آسون-اینکار-رو-بکینم>چطور میشه از روش آسون اینکار رو بکینم؟</h2><p>فرض کنیم که توی موقعیتی هستیم که لازمه یه عکس بنر رو توی تک تک صفحات وبسایت نمایش بدیم که این عکس بنر از دیتابیس گرفته میشه.</p><p>فایل <a href=http://models.py>models.py</a> این شکلیه:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># models.py</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BannerImage</span>(models<span style=color:#f92672>.</span>Model):
</span></span><span style=display:flex><span>	image <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>ImageField(upload_to<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;img&#34;</span>)
</span></span></code></pre></div><p>حالا با استفاده از custom context processor که می‌نویسیم می‌تونیم بهش دسترسی داشته باشیم.</p><p>یه فایل به اسم context_processors.py توی دایرکتوری(پوشه)‌ app مورد نظرمون میسازیم و داخلش یه فانکشن می‌نویسم که در نهایت یه دیکشنری برامون بر می‌گردونه.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># context_processors.py</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> BannerImage
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>access_banner_image</span>(request):
</span></span><span style=display:flex><span>	bannerImage <span style=color:#f92672>=</span> BannerImage<span style=color:#f92672>.</span>object<span style=color:#f92672>.</span>latest(<span style=color:#e6db74>&#39;-id&#39;</span>) <span style=color:#75715e># query the latest banner image </span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> {
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#39;bannerImage&#39;</span>: bannerImage,
</span></span><span style=display:flex><span>	}
</span></span></code></pre></div><p>فانکشن access_banner_image یه context processor که خودمون ساختیم و برای اینکه بتونیم استفادش کنیم باید context processor خودمون رو به فایل <a href=http://settings.py>settings.py</a> بخش TEMPLATE هاش اضافه کنیم و بعد از اون متغییر bannerImage برامون توی تمام تمپلیت‌ها قابل دسترس میشه.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e>#settings.py</span>
</span></span><span style=display:flex><span>TEMPLATES <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#75715e>#under OPTIONS key</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;OPTIONS&#39;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;context_processors&#39;</span>: [
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;django.template.context_processors.debug&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;django.template.context_processors.request&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;django.contrib.auth.context_processors.auth&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;django.contrib.messages.context_processors.messages&#39;</span>,
</span></span><span style=display:flex><span>	               <span style=color:#75715e>#context processor written by us.</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;appname.context_processors.access_banner_image&#39;</span>
</span></span><span style=display:flex><span>],
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><p>و تمامممم، الان bannerImage توی کل تمپلیت‌ها قابل دسترسه.</p><h2 id=و-حالا-چطوری-توی-تمپلیتهامون-ازش-استفاده-کنیم>و حالا چطوری توی تمپلیت‌هامون ازش استفاده کنیم:</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>&lt;</span>img src<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{{bannerImage.image.url}}&#34;</span> alt<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;&#39;</span><span style=color:#f92672>/&gt;</span>
</span></span></code></pre></div><p>با استفاده از context proccessor ها خیلی راحت تر و البته تمیز تر میتونیم کارهامون رو انجام بدیم.</p></section><div class="related-content mt-24"><h3>پست‌های مرتبط</h3><ul><li><a href=/%DA%AF%D8%B2%DB%8C%D9%86%D9%87-%D9%87%D8%A7%DB%8C-%D9%85%D8%AE%D8%AA%D9%84%D9%81-foreignkey-on_delete-%D8%AF%D8%B1-%D8%AC%D9%86%DA%AF%D9%88/>گزینه‌های مختلف ForeignKey on_delete در جنگو</a><br></li><li><a href=/typeerror-network-request-failed-in-react-native-and-django-rest-api/>حل مشکل TypeError – Network Request Failed در ارتباط ریکت نیتیو با django rest</a><br></li><li><a href=/gitignore-file-for-django-projects/>فایل gitignore برای پروژه های جنگو</a><br></li></ul></div><footer class="mt-12 flex flex-wrap"><a class="mr-1.5 mb-1.5 rounded-lg bg-black/[3%] px-5 py-2 no-underline dark:bg-white/[8%]" href=https://omidmamadi.github.io/tags/%D8%A8%DA%A9-%D8%A7%D9%86%D8%AF>بک اند</a>
<a class="mr-1.5 mb-1.5 rounded-lg bg-black/[3%] px-5 py-2 no-underline dark:bg-white/[8%]" href=https://omidmamadi.github.io/tags/%D8%AC%D9%86%DA%AF%D9%88>جنگو</a></footer><nav class="flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]"><a class="flex w-1/2 items-center p-6 pr-3 no-underline" href=https://omidmamadi.github.io/post/2022-12-30-migrate-wordpress-to-hugo/><span class=ml-1.5>→</span><span>مهاجرت از وردپرس به هیوگو</span></a>
<a class="ml-auto flex w-1/2 items-center justify-end p-6 pl-3 no-underline" href=https://omidmamadi.github.io/ssh-key-for-github/><span>استفاده از کلید SSH برای گیتهاب</span><span class=mr-1.5>←</span></a></nav><div class=mt-5 id=graphcomment></div><script type=text/javascript>var __semio__params={graphcommentId:"techwithomid",behaviour:{}};function __semio__onload(){__semio__gc_graphlogin(__semio__params)}(function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.onload=__semio__onload,e.defer=!0,e.src="https://integration.graphcomment.com/gc_graphlogin.js?"+Date.now(),(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script></article></main><footer class="opaco mx-auto flex h-[5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"><a class="link mx-6" href=https://gohugo.io/ rel=noopener target=_blank>با افتخار قدرت گرفته از Hugo</a>️<div class=mr-auto>&copy; 2026
<a class=link href=https://omidmamadi.github.io/>تک ویت امید</a></div></footer></body></html>